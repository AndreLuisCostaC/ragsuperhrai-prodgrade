(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function a(){let[e,a]=(0,s.useState)(""),[r,n]=(0,s.useState)([]),[l,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)(null),[d,x]=(0,s.useState)(null),m=async t=>{if(t.preventDefault(),e.trim().length<10)return;let s={role:"user",content:e,timestamp:new Date};n(e=>[...e,s]),a(""),o(!0),c(null);try{let t={question:e};d&&(t.conversation_id=d),console.log("=== Current Question ==="),console.log(`Question: ${e}`),console.log(`Conversation ID: ${d||"New conversation"}`),console.log("========================");let s=await fetch("https://hucp1zany2.execute-api.ca-central-1.amazonaws.com/api/rag/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(3e5)});if(!s.ok){let e="";try{let t=await s.json();e=t.detail||t.error?.message||t.message||""}catch{e=s.statusText}throw Error(`API request failed with status ${s.status}${e?`: ${e}`:""}`)}let a=await s.json();a.conversation_id&&x(a.conversation_id);let r={role:"assistant",content:a.answer||"I apologize, but I could not generate a response.",timestamp:new Date,sources:a.sources};console.log("=== AI Response ==="),console.log(`Answer: ${r.content}`),a.conversation_id&&console.log(`Conversation ID: ${a.conversation_id}`),r.sources&&r.sources.length>0&&(console.log(`Sources (${r.sources.length}):`),r.sources.forEach((e,t)=>{console.log(`  [${t+1}] ${e.title}${e.url?` - ${e.url}`:""}`)})),console.log("==================="),n(e=>[...e,r])}catch(s){let e=s instanceof Error?s.message:"An unexpected error occurred. Please try again.";c(e);let t={role:"assistant",content:`I'm sorry, I encountered an error: ${e}. Please check your connection and try again.`,timestamp:new Date};n(e=>[...e,t])}finally{o(!1)}},h=e.trim().length>=10;return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col bg-zinc-50 font-sans dark:bg-black",children:[(0,t.jsx)("header",{className:"border-b border-black/[.08] bg-white px-6 py-4 dark:border-white/[.145] dark:bg-zinc-950",children:(0,t.jsxs)("div",{className:"mx-auto flex max-w-4xl items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-black dark:text-zinc-50",children:"SuperHRAI Chat"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[r.length>0&&(0,t.jsx)("button",{onClick:()=>{n([]),x(null),a(""),c(null)},className:"rounded-md px-4 py-2 text-sm font-medium text-zinc-600 transition-colors hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-900",children:"New Chat"}),(0,t.jsx)("button",{className:"rounded-md px-4 py-2 text-sm font-medium text-zinc-600 transition-colors hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-900",children:"Settings"})]})]})}),(0,t.jsxs)("main",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,t.jsx)("div",{className:"mx-auto max-w-4xl",children:0===r.length?(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center py-16 text-center",children:[(0,t.jsx)("h2",{className:"mb-4 text-2xl font-semibold text-black dark:text-zinc-50",children:"Welcome to SuperHRAI Chat"}),(0,t.jsx)("p",{className:"max-w-md text-lg leading-8 text-zinc-600 dark:text-zinc-400",children:"Ask me anything about your company policies, HR procedures, or employee benefits. I'll help you find the information you need."}),(0,t.jsxs)("div",{className:"mt-8 flex flex-wrap gap-2",children:[(0,t.jsx)("button",{onClick:()=>a("What are the company vacation policies?"),className:"rounded-full border border-black/[.08] bg-white px-4 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-white/[.145] dark:bg-zinc-900 dark:text-zinc-300 dark:hover:bg-zinc-800",children:"Vacation policies"}),(0,t.jsx)("button",{onClick:()=>a("How do I request time off?"),className:"rounded-full border border-black/[.08] bg-white px-4 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-white/[.145] dark:bg-zinc-900 dark:text-zinc-300 dark:hover:bg-zinc-800",children:"Time off request"}),(0,t.jsx)("button",{onClick:()=>a("What benefits are available?"),className:"rounded-full border border-black/[.08] bg-white px-4 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-white/[.145] dark:bg-zinc-900 dark:text-zinc-300 dark:hover:bg-zinc-800",children:"Employee benefits"})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[r.map((e,s)=>(0,t.jsx)("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[80%] rounded-lg px-4 py-3 ${"user"===e.role?"bg-blue-600 text-white":"bg-white text-black dark:bg-zinc-900 dark:text-zinc-50"}`,children:[(0,t.jsx)("p",{className:"whitespace-pre-wrap break-words",children:e.content}),e.sources&&e.sources.length>0&&(0,t.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.sources.map((e,s)=>(0,t.jsx)("span",{className:"rounded-md bg-blue-100 px-2 py-1 text-xs text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:e.title},s))}),(0,t.jsx)("p",{className:`mt-1 text-xs ${"user"===e.role?"text-blue-100":"text-zinc-500 dark:text-zinc-400"}`,children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},s)),l&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsx)("div",{className:"rounded-lg bg-white px-4 py-3 dark:bg-zinc-900",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-zinc-400 [animation-delay:-0.3s]"}),(0,t.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-zinc-400 [animation-delay:-0.15s]"}),(0,t.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-zinc-400"})]})})})]})})}),(0,t.jsx)("div",{className:"border-t border-black/[.08] bg-white px-4 py-4 dark:border-white/[.145] dark:bg-zinc-950",children:(0,t.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,t.jsxs)("form",{onSubmit:m,className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-1 items-end gap-2 rounded-lg border border-black/[.08] bg-white p-2 dark:border-white/[.145] dark:bg-zinc-900",children:[(0,t.jsx)("button",{type:"button",className:"flex h-10 w-10 items-center justify-center rounded-md text-zinc-600 transition-colors hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800",title:"Upload file",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.121 2.121l7.81-7.81a1.5 1.5 0 00-2.121-2.121z"})})}),(0,t.jsx)("textarea",{value:e,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&h&&(e.preventDefault(),m(e))},placeholder:"Ask a question about company policies, HR procedures, or employee benefits... (minimum 10 characters)",rows:1,className:"max-h-32 flex-1 resize-none border-0 bg-transparent px-2 py-2 text-base text-black placeholder-zinc-500 focus:outline-none dark:text-zinc-50 dark:placeholder-zinc-400"}),(0,t.jsx)("div",{className:"flex items-center gap-1 px-2",children:(0,t.jsxs)("span",{className:`text-xs ${e.length<10?"text-zinc-400 dark:text-zinc-600":"text-zinc-600 dark:text-zinc-400"}`,children:[e.length,"/10"]})})]}),(0,t.jsx)("button",{type:"submit",disabled:!h||l,className:"flex h-14 w-14 items-center justify-center rounded-lg bg-blue-600 text-white transition-colors hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-blue-600",title:"Send message",children:l?(0,t.jsxs)("svg",{className:"h-5 w-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]}),e.length>0&&e.length<10&&(0,t.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Please enter at least 10 characters to send a message."}),i&&(0,t.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:i})]})})]})]})}e.s(["default",()=>a])}]);